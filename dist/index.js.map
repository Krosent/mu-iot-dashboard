{"version":3,"sources":["app.js","index.js"],"names":["solidNodeClient","require","SolidFileClient","express","html","app","client","SolidNodeClient","fileClient","get","_","res","set","login","idp","username","password","getSession","then","session","console","log","JSON","stringify","info","webId","catch","error","status","send","req","params","isLoggedIn","fileLink","file","readFile","write","end","err","module","exports","port","listen"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["const solidNodeClient = require('solid-node-client');\nconst SolidFileClient = require('solid-file-client');\n\nconst express = require('express');\n\n// const axios = require('axios');\n\n// import { getFile, isRawData, getContentType, getSourceUrl, } from \"@inrupt/solid-client\";\n\nconst html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <title>A JavaScript project</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n</head>\n<body>\n  <h1>A JavaScript project</h1>\n</body>\n</html>`;\n\nconst app = express();\nconst client = new solidNodeClient.SolidNodeClient();\nconst fileClient = new SolidFileClient(client);\n\napp.get('/', async (_, res) => {\n  res.set('Content-Type', 'text/html');\n  await client.login({\n    idp: 'https://solidcommunity.net', // e.g. https://solidcommunity.net\n    username: 'iot-solid-bot',\n    password: 'kDLpdi!LK2AV84k',\n  });\n\n  /* idp: 'https://broker.pod.inrupt.com', // e.g. https://solidcommunity.net\n    username: 'iot-solid-bot',\n    password: 'kDLpdi!LK2AV84k',\n  */\n\n  /* idp: 'https://broker.pod.inrupt.com', // e.g. https://solidcommunity.net\n    username: 'krosent',\n    password: 'ggUAL#H8dxcYw6q',\n  */\n\n  // console.log(`client: ${JSON.stringify(client)}`);\n\n  client\n    .getSession()\n    .then((session) =>\n      console.log(`Session: ${JSON.stringify(session.info.webId)}`))\n    .catch((error) => console.log(`We have error: ${error}`));\n\n  res.status(200).send(html);\n});\n\napp.get('/authorize/:username/:password', async (req, res) => {\n  console.log(`username: ${req.params.username}`);\n  console.log(`password: ${req.params.password}`);\n\n  await client.login({\n    idp: 'https://solidcommunity.net', // e.g. https://solidcommunity.net\n    username: req.params.username,\n    password: req.params.password,\n  });\n  client\n    .getSession()\n    .then((session) => {\n      console.log(session);\n      if (session.isLoggedIn) {\n        res.status(200).send('Authorized');\n      } else {\n        res.status(405).send('Unauthorized');\n      }\n    })\n    .catch((error) => res.status(405).send('Unauthorized'));\n});\n\napp.get('/automations/fetch', async (_, res) => {\n  // https://iot-solid-bot.solidcommunity.net/automations/automations.yaml\n\n  const fileLink = 'https://iot-solid-bot.solidcommunity.net/automations/automations.yaml';\n  try {\n    const file = await fileClient.readFile(fileLink);\n\n    res.write(file, 'binary');\n    res.end();\n  } catch (err) {\n    console.log(`error is: ${err}`);\n  }\n});\n\nmodule.exports = app;\n","const app = require('./app');\n\nconst port = '8888';\n\napp.listen(port, () => {\n  console.log(`Server is listening on port ${port}...`);\n});\n"]}